import{av as u}from"./DrZxtosp.js";const o="pfadi_token",a=u(null),s=()=>typeof localStorage>"u"?null:localStorage.getItem(o),m=e=>{typeof localStorage>"u"||(localStorage.setItem(o,e),a.set(l(e)))},y=()=>{typeof localStorage>"u"||(localStorage.removeItem(o),a.set(null))},h=()=>{const e=s();e&&a.set(l(e))},l=e=>{try{const t=e.split(".")[1],n=JSON.parse(atob(t));return{id:n.id,username:n.username??n.email,role:n.role}}catch{return null}},d=()=>{const e=s();return e?{Authorization:`Bearer ${e}`}:{}},g=e=>e==="user"?"Nutzer":e==="admin"?"Admin":"Materialwart",f="",k=async(e,t={})=>{const n=t.body!==void 0&&t.body!==null,c={...d(),...n?{"Content-Type":"application/json"}:{},...t.headers||{}},r=await fetch(`${f}${e}`,{...t,headers:c});if(!r.ok){const i=await r.text();throw new Error(i||"Request failed")}return r.status===204?null:r.json()};export{k as a,m as b,g as c,y as d,h as r,a as s};
