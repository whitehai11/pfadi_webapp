import{e as V,a as l,f as p,s as c}from"../chunks/CXN8AEkE.js";import{i as W}from"../chunks/Ba5BHlZf.js";import{m as X,n as Y,w as x,o as Z,r as e,q as t,t as a,y as aa,a as s,v as I,s as v}from"../chunks/DrZxtosp.js";import{i as z}from"../chunks/C09UTFEA.js";import{e as ta,i as ea}from"../chunks/BnX6E_pk.js";import{b as sa,r as na}from"../chunks/BLUhCEgd.js";import{a as ra}from"../chunks/C0-kHXY5.js";var ia=p('<div class="actions actions-between"><span> </span> <span class="badge badge-secondary"> </span></div>'),oa=p('<div class="card-grid"></div>'),ca=p('<p class="text-muted">Keine Daten vorhanden.</p>'),va=p('<section class="card"><h3 class="section-title">Box</h3> <div class="card-grid grid-2"><div><p><strong>Name:</strong> </p> <p><strong>Beschreibung:</strong> </p></div> <div><p><strong>Kennung:</strong> </p></div></div> <h4 class="section-title">Material</h4> <!></section>'),da=p('<section class="card nfc-hero"><div class="nfc-glow"></div> <div><h2 class="page-title">NFC</h2> <p class="text-muted">Kennung lesen und Box anzeigen.</p> <div class="actions"><button class="btn btn-primary">Kennung lesen</button> <span class="hint"> </span></div></div> <div class="nfc-orb" aria-hidden="true"></div></section> <!>',1);function ha(D,M){X(M,!1);let d=I("NFC-Kennung lesen."),n=I(null),K=!1;const R=async()=>{v(d,"Scanne..."),v(n,null);try{if(!sa()){v(d,"NFC nicht verfÃ¼gbar.");return}K=!0;const i=await na();v(d,`Kennung erkannt: ${i}`),v(n,await ra(`/api/boxes/tag/${encodeURIComponent(i)}`))}catch{v(d,"Kennung konnte nicht gelesen oder nicht gefunden werden.")}finally{K=!1}};W();var w=da(),g=Y(w),y=e(t(g),2),N=e(t(y),4),k=t(N),C=e(k,2),T=t(C,!0);a(C),a(N),a(y),aa(2),a(g);var U=e(g,2);{var j=i=>{var f=va(),_=e(t(f),2),m=t(_),u=t(m),A=e(t(u));a(u);var F=e(u,2),E=e(t(F));a(F),a(m);var B=e(m,2),S=t(B),G=e(t(S));a(S),a(B),a(_);var H=e(_,4);{var J=o=>{var r=oa();ta(r,5,()=>s(n).materials,ea,(O,$)=>{var h=ia(),b=t(h),P=t(b,!0);a(b);var q=e(b,2),Q=t(q,!0);a(q),a(h),x(()=>{c(P,s($).name),c(Q,s($).assigned_quantity)}),l(O,h)}),a(r),l(o,r)},L=o=>{var r=ca();l(o,r)};z(H,o=>{var r;(r=s(n).materials)!=null&&r.length?o(J):o(L,!1)})}a(f),x(()=>{c(A,` ${s(n).name??""}`),c(E,` ${(s(n).description||"-")??""}`),c(G,` ${s(n).nfc_tag??""}`)}),l(i,f)};z(U,i=>{s(n)&&i(j)})}x(()=>c(T,s(d))),V("click",k,R),l(D,w),Z()}export{ha as component};
