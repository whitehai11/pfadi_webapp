const s=self,a="pfadi-shell-v1",h=["/","/manifest.json","/icon.svg"];s.addEventListener("install",e=>{e.waitUntil(caches.open(a).then(t=>t.addAll(h))),s.skipWaiting()});s.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(t=>Promise.all(t.filter(n=>n!==a).map(n=>caches.delete(n))))),s.clients.claim()});s.addEventListener("fetch",e=>{const{request:t}=e,n=new URL(t.url);t.method==="GET"&&(n.pathname.startsWith("/api")||n.pathname.startsWith("/calendar.ics")||e.respondWith(caches.match(t).then(i=>i||fetch(t).then(c=>{const r=c.clone();return caches.open(a).then(l=>l.put(t,r)),c}))))});
