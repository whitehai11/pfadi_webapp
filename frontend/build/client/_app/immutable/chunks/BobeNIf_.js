import{a as s}from"./C0-kHXY5.js";const o=t=>{const r="=".repeat((4-t.length%4)%4),e=(t+r).replace(/-/g,"+").replace(/_/g,"/"),a=atob(e),n=new Uint8Array(a.length);for(let i=0;i<a.length;++i)n[i]=a.charCodeAt(i);return n},u=async()=>{if(!("serviceWorker"in navigator)||!("PushManager"in window))throw new Error("Push nicht unterstÃ¼tzt");const t=await navigator.serviceWorker.ready,{publicKey:r}=await s("/api/push/vapid-public-key"),e=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o(r)});return await s("/api/push/subscribe",{method:"POST",body:JSON.stringify(e)}),e},p=async()=>{if(!("serviceWorker"in navigator))return!1;const r=await(await navigator.serviceWorker.ready).pushManager.getSubscription();return r?(await s("/api/push/unsubscribe",{method:"POST",body:JSON.stringify(r)}),r.unsubscribe()):!1};export{u as r,p as u};
